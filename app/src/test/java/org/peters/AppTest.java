/*
 * This source file was generated by the Gradle 'init' task
 */
package org.peters;

import org.junit.jupiter.api.Test;
import static org.junit.jupiter.api.Assertions.*;
import java.io.*;
import java.net.*;
import java.util.*;
import com.fasterxml.jackson.databind.ObjectMapper;

class AppTest {
    ObjectMapper objectMapper = new ObjectMapper();

    @Test void nslookup()throws IOException,UnknownHostException  {
      App classUnderTest = new App();
      try {
          File file = new File("src/main/resources/config.json");
          Config config = objectMapper.readValue(file, Config.class);
          String url = config.getUrl();
          String hostName = url.replace("https://","");
          String ip = classUnderTest.getIP(hostName);
          System.out.println(hostName);
          System.out.println(hostName);
          assertEquals(hostName,"www.google.com" );
          assertEquals(ip, "172.217.7.36");
       } catch (UnknownHostException uhe) {
           uhe.printStackTrace();
       }
     }

    @Test
    void jsonParseConfig() throws IOException {
        File file = new File("src/main/resources/config.json");
        Config config = objectMapper.readValue(file, Config.class);

        assertEquals(config.getUrl(),"https://www.google.com");
    }
    }

